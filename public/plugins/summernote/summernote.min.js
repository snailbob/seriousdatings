!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery)}(function(e){Array.prototype.reduce||(Array.prototype.reduce=function(e){var t,n=Object(this),o=n.length>>>0,i=0;if(2===arguments.length)t=arguments[1];else{for(;o>i&&!(i in n);)i++;if(i>=o)throw new TypeError("Reduce of empty array with no initial value");t=n[i++]}for(;o>i;i++)i in n&&(t=e(t,n[i],i,n));return t}),"function"!=typeof Array.prototype.filter&&(Array.prototype.filter=function(e){for(var t=Object(this),n=t.length>>>0,o=[],i=arguments.length>=2?arguments[1]:void 0,r=0;n>r;r++)if(r in t){var a=t[r];e.call(i,a,r,t)&&o.push(a)}return o});var t,n="function"==typeof define&&define.amd,o=function(t){var n="Comic Sans MS"===t?"Courier New":"Comic Sans MS",o=e("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),i=o.css("fontFamily",n).width(),r=o.css("fontFamily",t+","+n).width();return o.remove(),i!==r},i=navigator.userAgent,r={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:/MSIE|Trident/i.test(i),isFF:/firefox/i.test(i),isWebkit:/webkit/i.test(i),isSafari:/safari/i.test(i),jqueryVersion:parseFloat(e.fn.jquery),isSupportAmd:n,hasCodeMirror:n?require.specified("CodeMirror"):!!window.CodeMirror,isFontInstalled:o,isW3CRangeSupport:!!document.createRange},a=function(){var t=function(e){return function(t){return e===t}},n=function(e,t){return e===t},o=function(e){return function(t,n){return t[e]===n[e]}},i=function(){return!0},r=function(){return!1},a=function(e){return function(){return!e.apply(e,arguments)}},s=function(e,t){return function(n){return e(n)&&t(n)}},l=function(e){return e},d=0,u=function(e){var t=++d+"";return e?e+t:t},c=function(t){var n=e(document);return{top:t.top+n.scrollTop(),left:t.left+n.scrollLeft(),width:t.right-t.left,height:t.bottom-t.top}},f=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t},h=function(e,t){return t=t||"",t+e.split(".").map(function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}).join("")};return{eq:t,eq2:n,peq2:o,ok:i,fail:r,self:l,not:a,and:s,uniqueId:u,rect2bnd:c,invertObject:f,namespaceToCamel:h}}(),s=function(){var t=function(e){return e[0]},n=function(e){return e[e.length-1]},o=function(e){return e.slice(0,e.length-1)},i=function(e){return e.slice(1)},r=function(e,t){for(var n=0,o=e.length;o>n;n++){var i=e[n];if(t(i))return i}},s=function(e,t){for(var n=0,o=e.length;o>n;n++)if(!t(e[n]))return!1;return!0},l=function(t,n){return-1!==e.inArray(n,t)},d=function(e,t){return t=t||a.self,e.reduce(function(e,n){return e+t(n)},0)},u=function(e){for(var t=[],n=-1,o=e.length;++n<o;)t[n]=e[n];return t},c=function(e,o){if(!e.length)return[];var r=i(e);return r.reduce(function(e,t){var i=n(e);return o(n(i),t)?i[i.length]=t:e[e.length]=[t],e},[[t(e)]])},f=function(e){for(var t=[],n=0,o=e.length;o>n;n++)e[n]&&t.push(e[n]);return t},h=function(e){for(var t=[],n=0,o=e.length;o>n;n++)l(t,e[n])||t.push(e[n]);return t},v=function(e,t){var n=e.indexOf(t);return-1===n?null:e[n+1]},p=function(e,t){var n=e.indexOf(t);return-1===n?null:e[n-1]};return{head:t,last:n,initial:o,tail:i,prev:p,next:v,find:r,contains:l,all:s,sum:d,from:u,clusterBy:c,compact:f,unique:h}}(),l=String.fromCharCode(160),d="ï»¿",u=function(){var t=function(t){return t&&e(t).hasClass("note-editable")},n=function(t){return t&&e(t).hasClass("note-control-sizing")},o=function(t){var n;if(t.hasClass("note-air-editor")){var o=s.last(t.attr("id").split("-"));return n=function(t){return function(){return e(t+o)}},{editor:function(){return t},holder:function(){return t.data("holder")},editable:function(){return t},popover:n("#note-popover-"),handle:n("#note-handle-"),dialog:n("#note-dialog-")}}return n=function(e){return function(){return t.find(e)}},{editor:function(){return t},holder:function(){return t.data("holder")},dropzone:n(".note-dropzone"),toolbar:n(".note-toolbar"),editable:n(".note-editable"),codable:n(".note-codable"),statusbar:n(".note-statusbar"),popover:n(".note-popover"),handle:n(".note-handle"),dialog:n(".note-dialog")}},i=function(t){var n=e(t).closest(".note-editor, .note-air-editor, .note-air-layout");if(!n.length)return null;var i;return i=n.is(".note-editor, .note-air-editor")?n:e("#note-editor-"+s.last(n.attr("id").split("-"))),o(i)},c=function(e){return e=e.toUpperCase(),function(t){return t&&t.nodeName.toUpperCase()===e}},f=function(e){return e&&3===e.nodeType},h=function(e){return e&&/^BR|^IMG|^HR/.test(e.nodeName.toUpperCase())},v=function(e){return t(e)?!1:e&&/^DIV|^P|^LI|^H[1-7]/.test(e.nodeName.toUpperCase())},p=c("LI"),m=function(e){return v(e)&&!p(e)},g=c("TABLE"),b=function(e){return!(x(e)||C(e)||v(e)||g(e)||y(e))},C=function(e){return e&&/^UL|^OL/.test(e.nodeName.toUpperCase())},k=function(e){return e&&/^TD|^TH/.test(e.nodeName.toUpperCase())},y=c("BLOCKQUOTE"),x=function(e){return k(e)||y(e)||t(e)},w=c("A"),T=function(e){return b(e)&&!!A(e,v)},N=function(e){return b(e)&&!A(e,v)},S=c("BODY"),P=function(e,t){return e.nextSibling===t||e.previousSibling===t},L=function(e,t){t=t||a.ok;var n=[];return e.previousSibling&&t(e.previousSibling)&&n.push(e.previousSibling),n.push(e),e.nextSibling&&t(e.nextSibling)&&n.push(e.nextSibling),n},F=r.isMSIE?"&nbsp;":"<br>",E=function(e){return f(e)?e.nodeValue.length:e.childNodes.length},M=function(e){var t=E(e);return 0===t?!0:f(e)||1!==t||e.innerHTML!==F?s.all(e.childNodes,f)&&""===e.innerHTML?!0:!1:!0},I=function(e){h(e)||E(e)||(e.innerHTML=F)},A=function(e,n){for(;e;){if(n(e))return e;if(t(e))break;e=e.parentNode}return null},R=function(e,n){for(e=e.parentNode;e&&1===E(e);){if(n(e))return e;if(t(e))break;e=e.parentNode}return null},D=function(e,n){n=n||a.fail;var o=[];return A(e,function(e){return t(e)||o.push(e),n(e)}),o},H=function(e,t){var n=D(e);return s.last(n.filter(t))},B=function(t,n){for(var o=D(t),i=n;i;i=i.parentNode)if(e.inArray(i,o)>-1)return i;return null},z=function(e,t){t=t||a.fail;for(var n=[];e&&!t(e);)n.push(e),e=e.previousSibling;return n},U=function(e,t){t=t||a.fail;for(var n=[];e&&!t(e);)n.push(e),e=e.nextSibling;return n},O=function(e,t){var n=[];return t=t||a.ok,function o(i){e!==i&&t(i)&&n.push(i);for(var r=0,a=i.childNodes.length;a>r;r++)o(i.childNodes[r])}(e),n},j=function(t,n){var o=t.parentNode,i=e("<"+n+">")[0];return o.insertBefore(i,t),i.appendChild(t),i},K=function(e,t){var n=t.nextSibling,o=t.parentNode;return n?o.insertBefore(e,n):o.appendChild(e),e},q=function(t,n){return e.each(n,function(e,n){t.appendChild(n)}),t},W=function(e){return 0===e.offset},V=function(e){return e.offset===E(e.node)},_=function(e){return W(e)||V(e)},Z=function(e,t){for(;e&&e!==t;){if(0!==J(e))return!1;e=e.parentNode}return!0},G=function(e,t){for(;e&&e!==t;){if(J(e)!==E(e.parentNode)-1)return!1;e=e.parentNode}return!0},J=function(e){for(var t=0;e=e.previousSibling;)t+=1;return t},Y=function(e){return!!(e&&e.childNodes&&e.childNodes.length)},Q=function(e,n){var o,i;if(0===e.offset){if(t(e.node))return null;o=e.node.parentNode,i=J(e.node)}else Y(e.node)?(o=e.node.childNodes[e.offset-1],i=E(o)):(o=e.node,i=n?0:e.offset-1);return{node:o,offset:i}},X=function(e,n){var o,i;if(E(e.node)===e.offset){if(t(e.node))return null;o=e.node.parentNode,i=J(e.node)+1}else Y(e.node)?(o=e.node.childNodes[e.offset],i=0):(o=e.node,i=n?E(e.node):e.offset+1);return{node:o,offset:i}},$=function(e,t){return e.node===t.node&&e.offset===t.offset},et=function(e){if(f(e.node)||!Y(e.node)||M(e.node))return!0;var t=e.node.childNodes[e.offset-1],n=e.node.childNodes[e.offset];return t&&!h(t)||n&&!h(n)?!1:!0},tt=function(e,t){for(;e;){if(t(e))return e;e=Q(e)}return null},nt=function(e,t){for(;e;){if(t(e))return e;e=X(e)}return null},ot=function(e){if(!f(e.node))return!1;var t=e.node.nodeValue.charAt(e.offset-1);return t&&" "!==t&&t!==l},it=function(e,t,n,o){for(var i=e;i&&(n(i),!$(i,t));){var r=o&&e.node!==i.node&&t.node!==i.node;i=X(i,r)}},rt=function(t,n){var o=D(n,a.eq(t));return e.map(o,J).reverse()},at=function(e,t){for(var n=e,o=0,i=t.length;i>o;o++)n=n.childNodes.length<=t[o]?n.childNodes[n.childNodes.length-1]:n.childNodes[t[o]];return n},st=function(e,t){var n=t&&t.isSkipPaddingBlankHTML,o=t&&t.isNotSplitEdgePoint;if(_(e)&&(f(e.node)||o)){if(W(e))return e.node;if(V(e))return e.node.nextSibling}if(f(e.node))return e.node.splitText(e.offset);var i=e.node.childNodes[e.offset],r=K(e.node.cloneNode(!1),e.node);return q(r,U(i)),n||(I(e.node),I(r)),r},lt=function(e,t,n){var o=D(t.node,a.eq(e));return o.length?1===o.length?st(t,n):o.reduce(function(e,o){return e===t.node&&(e=st(t,n)),st({node:o,offset:e?u.position(e):E(o)},n)}):null},dt=function(e,t){var n,o,i=t?v:x,r=D(e.node,i),a=s.last(r)||e.node;i(a)?(n=r[r.length-2],o=a):(n=a,o=n.parentNode);var l=n&&lt(n,e,{isSkipPaddingBlankHTML:t,isNotSplitEdgePoint:t});return l||o!==e.node||(l=e.node.childNodes[e.offset]),{rightNode:l,container:o}},ut=function(e){return document.createElement(e)},ct=function(e){return document.createTextNode(e)},ft=function(e,t){if(e&&e.parentNode){if(e.removeNode)return e.removeNode(t);var n=e.parentNode;if(!t){var o,i,r=[];for(o=0,i=e.childNodes.length;i>o;o++)r.push(e.childNodes[o]);for(o=0,i=r.length;i>o;o++)n.insertBefore(r[o],e)}n.removeChild(e)}},ht=function(e,n){for(;e&&!t(e)&&n(e);){var o=e.parentNode;ft(e),e=o}},vt=function(e,t){if(e.nodeName.toUpperCase()===t.toUpperCase())return e;var n=ut(t);return e.style.cssText&&(n.style.cssText=e.style.cssText),q(n,s.from(e.childNodes)),K(n,e),ft(e),n},pt=c("TEXTAREA"),mt=function(e,t){var n=pt(e[0])?e.val():e.html();return t?n.replace(/[\n\r]/g,""):n},gt=function(t,n){var o=mt(t);if(n){var i=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;o=o.replace(i,function(e,t,n){n=n.toUpperCase();var o=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(n)&&!!t,i=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(n);return e+(o||i?"\n":"")}),o=e.trim(o)}return o};return{NBSP_CHAR:l,ZERO_WIDTH_NBSP_CHAR:d,blank:F,emptyPara:"<p>"+F+"</p>",makePredByNodeName:c,isEditable:t,isControlSizing:n,buildLayoutInfo:o,makeLayoutInfo:i,isText:f,isVoid:h,isPara:v,isPurePara:m,isInline:b,isBlock:a.not(b),isBodyInline:N,isBody:S,isParaInline:T,isList:C,isTable:g,isCell:k,isBlockquote:y,isBodyContainer:x,isAnchor:w,isDiv:c("DIV"),isLi:p,isBR:c("BR"),isSpan:c("SPAN"),isB:c("B"),isU:c("U"),isS:c("S"),isI:c("I"),isImg:c("IMG"),isTextarea:pt,isEmpty:M,isEmptyAnchor:a.and(w,M),isClosestSibling:P,withClosestSiblings:L,nodeLength:E,isLeftEdgePoint:W,isRightEdgePoint:V,isEdgePoint:_,isLeftEdgeOf:Z,isRightEdgeOf:G,prevPoint:Q,nextPoint:X,isSamePoint:$,isVisiblePoint:et,prevPointUntil:tt,nextPointUntil:nt,isCharPoint:ot,walkPoint:it,ancestor:A,singleChildAncestor:R,listAncestor:D,lastAncestor:H,listNext:U,listPrev:z,listDescendant:O,commonAncestor:B,wrap:j,insertAfter:K,appendChildNodes:q,position:J,hasChildren:Y,makeOffsetPath:rt,fromOffsetPath:at,splitTree:lt,splitPoint:dt,create:ut,createText:ct,remove:ft,removeWhile:ht,replace:vt,html:gt,value:mt}}(),c=function(){var t=function(e,t){var n,o,i=e.parentElement(),r=document.body.createTextRange(),a=s.from(i.childNodes);for(n=0;n<a.length;n++)if(!u.isText(a[n])){if(r.moveToElementText(a[n]),r.compareEndPoints("StartToStart",e)>=0)break;o=a[n]}if(0!==n&&u.isText(a[n-1])){var l=document.body.createTextRange(),d=null;l.moveToElementText(o||i),l.collapse(!o),d=o?o.nextSibling:i.firstChild;var c=e.duplicate();c.setEndPoint("StartToStart",l);for(var f=c.text.replace(/[\r\n]/g,"").length;f>d.nodeValue.length&&d.nextSibling;)f-=d.nodeValue.length,d=d.nextSibling;{d.nodeValue}t&&d.nextSibling&&u.isText(d.nextSibling)&&f===d.nodeValue.length&&(f-=d.nodeValue.length,d=d.nextSibling),i=d,n=f}return{cont:i,offset:n}},n=function(e){var t=function(e,n){var o,i;if(u.isText(e)){var r=u.listPrev(e,a.not(u.isText)),l=s.last(r).previousSibling;o=l||e.parentNode,n+=s.sum(s.tail(r),u.nodeLength),i=!l}else{if(o=e.childNodes[n]||e,u.isText(o))return t(o,0);n=0,i=!1}return{node:o,collapseToStart:i,offset:n}},n=document.body.createTextRange(),o=t(e.node,e.offset);return n.moveToElementText(o.node),n.collapse(o.collapseToStart),n.moveStart("character",o.offset),n},o=function(t,i,l,d){this.sc=t,this.so=i,this.ec=l,this.eo=d;var c=function(){if(r.isW3CRangeSupport){var e=document.createRange();return e.setStart(t,i),e.setEnd(l,d),e}var o=n({node:t,offset:i});return o.setEndPoint("EndToEnd",n({node:l,offset:d})),o};this.getPoints=function(){return{sc:t,so:i,ec:l,eo:d}},this.getStartPoint=function(){return{node:t,offset:i}},this.getEndPoint=function(){return{node:l,offset:d}},this.select=function(){var e=c();if(r.isW3CRangeSupport){var t=document.getSelection();t.rangeCount>0&&t.removeAllRanges(),t.addRange(e)}else e.select();return this},this.normalize=function(){var e=function(e){return u.isVisiblePoint(e)||(e=u.isLeftEdgePoint(e)?u.nextPointUntil(e,u.isVisiblePoint):u.prevPointUntil(e,u.isVisiblePoint)),e},t=e(this.getStartPoint()),n=e(this.getEndPoint());return new o(t.node,t.offset,n.node,n.offset)},this.nodes=function(e,t){e=e||a.ok;var n=t&&t.includeAncestor,o=t&&t.fullyContains,i=this.getStartPoint(),r=this.getEndPoint(),l=[],d=[];return u.walkPoint(i,r,function(t){if(!u.isEditable(t.node)){var i;o?(u.isLeftEdgePoint(t)&&d.push(t.node),u.isRightEdgePoint(t)&&s.contains(d,t.node)&&(i=t.node)):i=n?u.ancestor(t.node,e):t.node,i&&e(i)&&l.push(i)}},!0),s.unique(l)},this.commonAncestor=function(){return u.commonAncestor(t,l)},this.expand=function(e){var n=u.ancestor(t,e),r=u.ancestor(l,e);if(!n&&!r)return new o(t,i,l,d);var a=this.getPoints();return n&&(a.sc=n,a.so=0),r&&(a.ec=r,a.eo=u.nodeLength(r)),new o(a.sc,a.so,a.ec,a.eo)},this.collapse=function(e){return e?new o(t,i,t,i):new o(l,d,l,d)},this.splitText=function(){var e=t===l,n=this.getPoints();return u.isText(l)&&!u.isEdgePoint(this.getEndPoint())&&l.splitText(d),u.isText(t)&&!u.isEdgePoint(this.getStartPoint())&&(n.sc=t.splitText(i),n.so=0,e&&(n.ec=n.sc,n.eo=d-i)),new o(n.sc,n.so,n.ec,n.eo)},this.deleteContents=function(){if(this.isCollapsed())return this;var t=this.splitText(),n=t.nodes(null,{fullyContains:!0}),i=u.prevPointUntil(t.getStartPoint(),function(e){return!s.contains(n,e.node)}),r=[];return e.each(n,function(e,t){var n=t.parentNode;i.node!==n&&1===u.nodeLength(n)&&r.push(n),u.remove(t,!1)}),e.each(r,function(e,t){u.remove(t,!1)}),new o(i.node,i.offset,i.node,i.offset).normalize()};var f=function(e){return function(){var n=u.ancestor(t,e);return!!n&&n===u.ancestor(l,e)}};this.isOnEditable=f(u.isEditable),this.isOnList=f(u.isList),this.isOnAnchor=f(u.isAnchor),this.isOnCell=f(u.isCell),this.isLeftEdgeOf=function(e){if(!u.isLeftEdgePoint(this.getStartPoint()))return!1;var t=u.ancestor(this.sc,e);return t&&u.isLeftEdgeOf(this.sc,t)},this.isCollapsed=function(){return t===l&&i===d},this.wrapBodyInlineWithPara=function(){if(u.isBodyContainer(t)&&u.isEmpty(t))return t.innerHTML=u.emptyPara,new o(t.firstChild,0,t.firstChild,0);if(u.isParaInline(t)||u.isPara(t))return this.normalize();var e;if(u.isInline(t)){var n=u.listAncestor(t,a.not(u.isInline));e=s.last(n),u.isInline(e)||(e=n[n.length-2]||t.childNodes[i])}else e=t.childNodes[i>0?i-1:0];var r=u.listPrev(e,u.isParaInline).reverse();if(r=r.concat(u.listNext(e.nextSibling,u.isParaInline)),r.length){var l=u.wrap(s.head(r),"p");u.appendChildNodes(l,s.tail(r))}return this.normalize()},this.insertNode=function(e){var t=this.wrapBodyInlineWithPara().deleteContents(),n=u.splitPoint(t.getStartPoint(),u.isInline(e));return n.rightNode?n.rightNode.parentNode.insertBefore(e,n.rightNode):n.container.appendChild(e),e},this.pasteHTML=function(t){var n=this,o=e("<div></div>").html(t)[0],i=s.from(o.childNodes);return this.wrapBodyInlineWithPara().deleteContents(),e.map(i.reverse(),function(e){return n.insertNode(e)}).reverse()},this.toString=function(){var e=c();return r.isW3CRangeSupport?e.toString():e.text},this.getWordRange=function(e){var t=this.getEndPoint();if(!u.isCharPoint(t))return this;var n=u.prevPointUntil(t,function(e){return!u.isCharPoint(e)});return e&&(t=u.nextPointUntil(t,function(e){return!u.isCharPoint(e)})),new o(n.node,n.offset,t.node,t.offset)},this.bookmark=function(e){return{s:{path:u.makeOffsetPath(e,t),offset:i},e:{path:u.makeOffsetPath(e,l),offset:d}}},this.paraBookmark=function(e){return{s:{path:s.tail(u.makeOffsetPath(s.head(e),t)),offset:i},e:{path:s.tail(u.makeOffsetPath(s.last(e),l)),offset:d}}},this.getClientRects=function(){var e=c();return e.getClientRects()}};return{create:function(e,n,i,a){if(arguments.length)2===arguments.length&&(i=e,a=n);else if(r.isW3CRangeSupport){var s=document.getSelection();if(!s||0===s.rangeCount)return null;if(u.isBody(s.anchorNode))return null;var l=s.getRangeAt(0);e=l.startContainer,n=l.startOffset,i=l.endContainer,a=l.endOffset}else{var d=document.selection.createRange(),c=d.duplicate();c.collapse(!1);var f=d;f.collapse(!0);var h=t(f,!0),v=t(c,!1);u.isText(h.node)&&u.isLeftEdgePoint(h)&&u.isTextNode(v.node)&&u.isRightEdgePoint(v)&&v.node.nextSibling===h.node&&(h=v),e=h.cont,n=h.offset,i=v.cont,a=v.offset}return new o(e,n,i,a)},createFromNode:function(e){var t=e,n=0,o=e,i=u.nodeLength(o);return u.isVoid(t)&&(n=u.listPrev(t).length-1,t=t.parentNode),u.isBR(o)?(i=u.listPrev(o).length-1,o=o.parentNode):u.isVoid(o)&&(i=u.listPrev(o).length,o=o.parentNode),this.create(t,n,o,i)},createFromNodeBefore:function(e){return this.createFromNode(e).collapse(!0)},createFromNodeAfter:function(e){return this.createFromNode(e).collapse()},createFromBookmark:function(e,t){var n=u.fromOffsetPath(e,t.s.path),i=t.s.offset,r=u.fromOffsetPath(e,t.e.path),a=t.e.offset;return new o(n,i,r,a)},createFromParaBookmark:function(e,t){var n=e.s.offset,i=e.e.offset,r=u.fromOffsetPath(s.head(t),e.s.path),a=u.fromOffsetPath(s.last(t),e.e.path);return new o(r,n,a,i)}}}(),f={version:"0.6.7",options:{width:null,height:null,minHeight:null,maxHeight:null,focus:!1,tabsize:4,styleWithSpan:!0,disableLinkTarget:!1,disableDragAndDrop:!1,disableResizeEditor:!1,shortcuts:!0,placeholder:!1,prettifyHtml:!0,iconPrefix:"fa fa-",codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},lang:"en-US",direction:null,toolbar:[["style",["style"]],["font",["bold","italic","underline","clear"]],["fontname",["fontname"]],["fontsize",["fontsize"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["table",["table"]],["insert",["link","picture","hr"]],["view",["fullscreen","codeview"]],["help",["help"]]],plugin:{},airMode:!1,airPopover:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]],styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],defaultFontName:"Helvetica Neue",fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontNamesIgnoreCheck:[],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],insertTableMaxSize:{col:10,row:10},maximumImageFileSize:null,oninit:null,onfocus:null,onblur:null,onenter:null,onkeyup:null,onkeydown:null,onImageUpload:null,onImageUploadError:null,onMediaDelete:null,onToolbarClick:null,onsubmit:null,onCreateLink:function(e){return-1!==e.indexOf("@")&&-1===e.indexOf(":")?e="mailto:"+e:-1===e.indexOf("://")&&(e="http://"+e),e},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"showLinkDialog"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"showLinkDialog"}}},lang:{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},history:{undo:"Undo",redo:"Redo"}}}},h=function(){var t=function(t){return e.Deferred(function(n){e.extend(new FileReader,{onload:function(e){var t=e.target.result;n.resolve(t)},onerror:function(){n.reject(this)}}).readAsDataURL(t)}).promise()},n=function(t,n){return e.Deferred(function(o){var i=e("<img>");i.one("load",function(){i.off("error abort"),o.resolve(i)}).one("error abort",function(){i.off("load").detach(),o.reject(i)}).css({display:"none"}).appendTo(document.body).attr({src:t,"data-filename":n})}).promise()};return{readFileAsDataURL:t,createImage:n}}(),v=function(){var e={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};return{isEdit:function(e){return s.contains([8,9,13,32],e)},isMove:function(e){return s.contains([37,38,39,40],e)},nameFromCode:a.invertObject(e),code:e}}(),p=function(e){var t=[],n=-1,o=e[0],i=function(){var t=c.create(),n={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:e.html(),bookmark:t?t.bookmark(o):n}},r=function(t){null!==t.contents&&e.html(t.contents),null!==t.bookmark&&c.createFromBookmark(o,t.bookmark).select()};this.undo=function(){n>0&&(n--,r(t[n]))},this.redo=function(){t.length-1>n&&(n++,r(t[n]))},this.recordUndo=function(){n++,t.length>n&&(t=t.slice(0,n)),t.push(i())},this.recordUndo()},m=function(){var t=function(t,n){if(r.jqueryVersion<1.9){var o={};return e.each(n,function(e,n){o[n]=t.css(n)}),o}return t.css.call(t,n)};this.stylePara=function(t,n){e.each(t.nodes(u.isPara,{includeAncestor:!0}),function(t,o){e(o).css(n)})},this.styleNodes=function(t,n){t=t.splitText();var o=n&&n.nodeName||"SPAN",i=!(!n||!n.expandClosestSibling),r=!(!n||!n.onlyPartialContains);if(t.isCollapsed())return[t.insertNode(u.create(o))];var l=u.makePredByNodeName(o),d=e.map(t.nodes(u.isText,{fullyContains:!0}),function(e){return u.singleChildAncestor(e,l)||u.wrap(e,o)});if(i){if(r){var c=t.nodes();l=a.and(l,function(e){return s.contains(c,e)})}return e.map(d,function(t){var n=u.withClosestSiblings(t,l),o=s.head(n),i=s.tail(n);return e.each(i,function(e,t){u.appendChildNodes(o,t.childNodes),u.remove(t)}),s.head(n)})}return d},this.current=function(n,o){var i=e(u.isText(n.sc)?n.sc.parentNode:n.sc),r=["font-family","font-size","text-align","list-style-type","line-height"],a=t(i,r)||{};if(a["font-size"]=parseInt(a["font-size"],10),a["font-bold"]=document.queryCommandState("bold")?"bold":"normal",a["font-italic"]=document.queryCommandState("italic")?"italic":"normal",a["font-underline"]=document.queryCommandState("underline")?"underline":"normal",a["font-strikethrough"]=document.queryCommandState("strikeThrough")?"strikethrough":"normal",a["font-superscript"]=document.queryCommandState("superscript")?"superscript":"normal",a["font-subscript"]=document.queryCommandState("subscript")?"subscript":"normal",n.isOnList()){var s=["circle","disc","disc-leading-zero","square"],l=e.inArray(a["list-style-type"],s)>-1;a["list-style"]=l?"unordered":"ordered"}else a["list-style"]="none";var d=u.ancestor(n.sc,u.isPara);if(d&&d.style["line-height"])a["line-height"]=d.style.lineHeight;else{var c=parseInt(a["line-height"],10)/parseInt(a["font-size"],10);a["line-height"]=c.toFixed(1)}return a.image=u.isImg(o)&&o,a.anchor=n.isOnAnchor()&&u.ancestor(n.sc,u.isAnchor),a.ancestors=u.listAncestor(n.sc,u.isEditable),a.range=n,a}},g=function(){this.insertOrderedList=function(){this.toggleList("OL")},this.insertUnorderedList=function(){this.toggleList("UL")},this.indent=function(){var t=this,n=c.create().wrapBodyInlineWithPara(),o=n.nodes(u.isPara,{includeAncestor:!0}),i=s.clusterBy(o,a.peq2("parentNode"));e.each(i,function(n,o){var i=s.head(o);u.isLi(i)?t.wrapList(o,i.parentNode.nodeName):e.each(o,function(t,n){e(n).css("marginLeft",function(e,t){return(parseInt(t,10)||0)+25})})}),n.select()},this.outdent=function(){var t=this,n=c.create().wrapBodyInlineWithPara(),o=n.nodes(u.isPara,{includeAncestor:!0}),i=s.clusterBy(o,a.peq2("parentNode"));e.each(i,function(n,o){var i=s.head(o);u.isLi(i)?t.releaseList([o]):e.each(o,function(t,n){e(n).css("marginLeft",function(e,t){return t=parseInt(t,10)||0,t>25?t-25:""})})}),n.select()},this.toggleList=function(t){var n=this,o=c.create().wrapBodyInlineWithPara(),i=o.nodes(u.isPara,{includeAncestor:!0}),r=o.paraBookmark(i),l=s.clusterBy(i,a.peq2("parentNode"));if(s.find(i,u.isPurePara)){var d=[];e.each(l,function(e,o){d=d.concat(n.wrapList(o,t))}),i=d}else{var f=o.nodes(u.isList,{includeAncestor:!0}).filter(function(n){return!e.nodeName(n,t)});f.length?e.each(f,function(e,n){u.replace(n,t)}):i=this.releaseList(l,!0)}c.createFromParaBookmark(r,i).select()},this.wrapList=function(t,n){var o=s.head(t),i=s.last(t),r=u.isList(o.previousSibling)&&o.previousSibling,a=u.isList(i.nextSibling)&&i.nextSibling,l=r||u.insertAfter(u.create(n||"UL"),i);return t=e.map(t,function(e){return u.isPurePara(e)?u.replace(e,"LI"):e}),u.appendChildNodes(l,t),a&&(u.appendChildNodes(l,s.from(a.childNodes)),u.remove(a)),t},this.releaseList=function(t,n){var o=[];return e.each(t,function(t,i){var r=s.head(i),a=s.last(i),l=n?u.lastAncestor(r,u.isList):r.parentNode,d=l.childNodes.length>1?u.splitTree(l,{node:a.parentNode,offset:u.position(a)+1},{isSkipPaddingBlankHTML:!0}):null,c=u.splitTree(l,{node:r.parentNode,offset:u.position(r)},{isSkipPaddingBlankHTML:!0});i=n?u.listDescendant(c,u.isLi):s.from(c.childNodes).filter(u.isLi),(n||!u.isList(l.parentNode))&&(i=e.map(i,function(e){return u.replace(e,"P")})),e.each(s.from(i).reverse(),function(e,t){u.insertAfter(t,l)});var f=s.compact([l,c,d]);e.each(f,function(t,n){var o=[n].concat(u.listDescendant(n,u.isList));e.each(o.reverse(),function(e,t){u.nodeLength(t)||u.remove(t,!0)})}),o=o.concat(i)}),o}},b=function(){var t=new g;this.insertTab=function(e,t,n){var o=u.createText(new Array(n+1).join(u.NBSP_CHAR));t=t.deleteContents(),t.insertNode(o,!0),t=c.create(o,n),t.select()},this.insertParagraph=function(){var n=c.create();n=n.deleteContents(),n=n.wrapBodyInlineWithPara();var o,i=u.ancestor(n.sc,u.isPara);if(i){if(u.isEmpty(i)&&u.isLi(i))return t.toggleList(i.parentNode.nodeName),void 0;o=u.splitTree(i,n.getStartPoint());var r=u.listDescendant(i,u.isEmptyAnchor);r=r.concat(u.listDescendant(o,u.isEmptyAnchor)),e.each(r,function(e,t){u.remove(t)})}else{var a=n.sc.childNodes[n.so];o=e(u.emptyPara)[0],a?n.sc.insertBefore(o,a):n.sc.appendChild(o)}c.create(o,0).normalize().select()}},C=function(){this.tab=function(e,t){var n=u.ancestor(e.commonAncestor(),u.isCell),o=u.ancestor(n,u.isTable),i=u.listDescendant(o,u.isCell),r=s[t?"prev":"next"](i,n);r&&c.create(r,0).select()},this.createTable=function(t,n){for(var o,i=[],r=0;t>r;r++)i.push("<td>"+u.blank+"</td>");o=i.join("");for(var a,s=[],l=0;n>l;l++)s.push("<tr>"+o+"</tr>");return a=s.join(""),e('<table class="table table-bordered">'+a+"</table>")[0]}},k="bogus",y=function(t){var n=new m,o=new C,i=new b,a=new g;this.createRange=function(e){return this.focus(e),c.create()},this.saveRange=function(e,t){this.focus(e),e.data("range",c.create()),t&&c.create().collapse().select()},this.saveNode=function(e){for(var t=[],n=0,o=e[0].childNodes.length;o>n;n++)t.push(e[0].childNodes[n]);e.data("childNodes",t)},this.restoreRange=function(e){var t=e.data("range");t&&(t.select(),this.focus(e))},this.restoreNode=function(e){e.html("");for(var t=e.data("childNodes"),n=0,o=t.length;o>n;n++)e[0].appendChild(t[n])},this.currentStyle=function(e){var t=c.create();return t?t.isOnEditable()&&n.current(t,e):!1};var l=function(e){var n=u.makeLayoutInfo(e).holder();t.bindCustomEvent(n,e.data("callbacks"),"before.command")(e.html(),e)},d=function(e){var n=u.makeLayoutInfo(e).holder();t.bindCustomEvent(n,e.data("callbacks"),"change")(e.html(),e)};this.undo=function(e){l(e),e.data("NoteHistory").undo(),d(e)},this.redo=function(e){l(e),e.data("NoteHistory").redo(),d(e)};for(var f=this,v=this.beforeCommand=function(e){l(e),f.focus(e)},p=this.afterCommand=function(e,t){e.data("NoteHistory").recordUndo(),t||d(e)},y=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor","foreColor","insertHorizontalRule","fontName"],x=0,w=y.length;w>x;x++)this[y[x]]=function(e){return function(t,n){v(t),document.execCommand(e,!1,n),p(t,!0)}}(y[x]);this.tab=function(e,t){var n=this.createRange(e);n.isCollapsed()&&n.isOnCell()?o.tab(n):(v(e),i.insertTab(e,n,t.tabsize),p(e))},this.untab=function(e){var t=this.createRange(e);t.isCollapsed()&&t.isOnCell()&&o.tab(t,!0)},this.insertParagraph=function(e){v(e),i.insertParagraph(e),p(e)},this.insertOrderedList=function(e){v(e),a.insertOrderedList(e),p(e)
},this.insertUnorderedList=function(e){v(e),a.insertUnorderedList(e),p(e)},this.indent=function(e){v(e),a.indent(e),p(e)},this.outdent=function(e){v(e),a.outdent(e),p(e)},this.insertImage=function(e,n,o){h.createImage(n,o).then(function(t){v(e),t.css({display:"",width:Math.min(e.width(),t.width())}),c.create().insertNode(t[0]),c.createFromNodeAfter(t[0]).select(),p(e)}).fail(function(){var n=u.makeLayoutInfo(e).holder();t.bindCustomEvent(n,e.data("callbacks"),"image.upload.error")()})},this.insertNode=function(e,t){v(e),c.create().insertNode(t),c.createFromNodeAfter(t).select(),p(e)},this.insertText=function(e,t){v(e);var n=c.create().insertNode(u.createText(t));c.create(n,u.nodeLength(n)).select(),p(e)},this.pasteHTML=function(e,t){v(e);var n=c.create().pasteHTML(t);c.createFromNodeAfter(s.last(n)).select(),p(e)},this.formatBlock=function(e,t){v(e),t=r.isMSIE?"<"+t+">":t,document.execCommand("FormatBlock",!1,t),p(e)},this.formatPara=function(e){v(e),this.formatBlock(e,"P"),p(e)};for(var x=1;6>=x;x++)this["formatH"+x]=function(e){return function(t){this.formatBlock(t,"H"+e)}}(x);this.fontSize=function(t,o){var i=c.create(),r=i.isCollapsed();if(r){var a=n.styleNodes(i),l=s.head(a);e(a).css({"font-size":o+"px"}),l&&!u.nodeLength(l)&&(l.innerHTML=u.ZERO_WIDTH_NBSP_CHAR,c.createFromNodeAfter(l.firstChild).select(),t.data(k,l))}else v(t),e(n.styleNodes(i)).css({"font-size":o+"px"}),p(t)},this.removeBogus=function(e){var t=e.data(k);if(t){var n=s.find(s.from(t.childNodes),u.isText),o=n.nodeValue.indexOf(u.ZERO_WIDTH_NBSP_CHAR);-1!==o&&n.deleteData(o,1),u.isEmpty(t)&&u.remove(t),e.removeData(k)}},this.lineHeight=function(e,t){v(e),n.stylePara(c.create(),{lineHeight:t}),p(e)},this.unlink=function(e){var t=this.createRange();if(t.isOnAnchor()){var n=u.ancestor(t.sc,u.isAnchor);t=c.createFromNode(n),t.select(),v(e),document.execCommand("unlink"),p(e)}},this.createLink=function(t,o,i){var r=o.url,a=o.text,l=o.newWindow,d=o.range,u=d.toString()!==a;v(t),i.onCreateLink&&(r=i.onCreateLink(r));var f=[];if(u){var h=d.insertNode(e("<A>"+a+"</A>")[0]);f.push(h)}else f=n.styleNodes(d,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});e.each(f,function(t,n){e(n).attr("href",r),l?e(n).attr("target","_blank"):e(n).removeAttr("target")});var m=c.createFromNodeBefore(s.head(f)),g=m.getStartPoint(),b=c.createFromNodeAfter(s.last(f)),C=b.getEndPoint();c.create(g.node,g.offset,C.node,C.offset).select(),p(t)},this.getLinkInfo=function(t){this.focus(t);var n=c.create().expand(u.isAnchor),o=e(s.head(n.nodes(u.isAnchor)));return{range:n,text:n.toString(),isNewWindow:o.length?"_blank"===o.attr("target"):!1,url:o.length?o.attr("href"):""}},this.color=function(e,t){var n=JSON.parse(t),o=n.foreColor,i=n.backColor;v(e),o&&document.execCommand("foreColor",!1,o),i&&document.execCommand("backColor",!1,i),p(e)},this.insertTable=function(e,t){var n=t.split("x");v(e);var i=c.create().deleteContents();i.insertNode(o.createTable(n[0],n[1])),p(e)},this.floatMe=function(e,t,n){v(e),n.css("float",t),p(e)},this.imageShape=function(e,t,n){v(e),n.removeClass("img-rounded img-circle img-thumbnail"),t&&n.addClass(t),p(e)},this.resize=function(e,t,n){v(e),n.css({width:100*t+"%",height:""}),p(e)},this.resizeTo=function(e,t,n){var o;if(n){var i=e.y/e.x,r=t.data("ratio");o={width:r>i?e.x:e.y/r,height:r>i?e.x*r:e.y}}else o={width:e.x,height:e.y};t.css(o)},this.removeMedia=function(n,o,i){v(n),i.detach(),t.bindCustomEvent(e(),n.data("callbacks"),"media.delete")(i,n),p(n)},this.focus=function(e){e.focus(),r.isFF&&!c.create().isOnEditable()&&c.createFromNode(e[0]).normalize().collapse().select()}},x=function(){this.update=function(t,n){var o=function(t,n){t.find(".dropdown-menu li a").each(function(){var t=e(this).data("value")+""==n+"";this.className=t?"checked":""})},i=function(e,n){var o=t.find(e);o.toggleClass("active",n())};if(n.image){var a=e(n.image);i('button[data-event="imageShape"][data-value="img-rounded"]',function(){return a.hasClass("img-rounded")}),i('button[data-event="imageShape"][data-value="img-circle"]',function(){return a.hasClass("img-circle")}),i('button[data-event="imageShape"][data-value="img-thumbnail"]',function(){return a.hasClass("img-thumbnail")}),i('button[data-event="imageShape"]:not([data-value])',function(){return!a.is(".img-rounded, .img-circle, .img-thumbnail")});var s=a.css("float");i('button[data-event="floatMe"][data-value="left"]',function(){return"left"===s}),i('button[data-event="floatMe"][data-value="right"]',function(){return"right"===s}),i('button[data-event="floatMe"][data-value="none"]',function(){return"left"!==s&&"right"!==s});var l=a.attr("style");return i('button[data-event="resize"][data-value="1"]',function(){return!!/(^|\s)(max-)?width\s*:\s*100%/.test(l)}),i('button[data-event="resize"][data-value="0.5"]',function(){return!!/(^|\s)(max-)?width\s*:\s*50%/.test(l)}),i('button[data-event="resize"][data-value="0.25"]',function(){return!!/(^|\s)(max-)?width\s*:\s*25%/.test(l)}),void 0}var d=t.find(".note-fontname");if(d.length){var u=n["font-family"];if(u){for(var c=u.split(","),f=0,h=c.length;h>f&&(u=c[f].replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,""),!r.isFontInstalled(u));f++);d.find(".note-current-fontname").text(u),o(d,u)}}var v=t.find(".note-fontsize");v.find(".note-current-fontsize").text(n["font-size"]),o(v,parseFloat(n["font-size"]));var p=t.find(".note-height");o(p,parseFloat(n["line-height"])),i('button[data-event="bold"]',function(){return"bold"===n["font-bold"]}),i('button[data-event="italic"]',function(){return"italic"===n["font-italic"]}),i('button[data-event="underline"]',function(){return"underline"===n["font-underline"]}),i('button[data-event="strikethrough"]',function(){return"strikethrough"===n["font-strikethrough"]}),i('button[data-event="superscript"]',function(){return"superscript"===n["font-superscript"]}),i('button[data-event="subscript"]',function(){return"subscript"===n["font-subscript"]}),i('button[data-event="justifyLeft"]',function(){return"left"===n["text-align"]||"start"===n["text-align"]}),i('button[data-event="justifyCenter"]',function(){return"center"===n["text-align"]}),i('button[data-event="justifyRight"]',function(){return"right"===n["text-align"]}),i('button[data-event="justifyFull"]',function(){return"justify"===n["text-align"]}),i('button[data-event="insertUnorderedList"]',function(){return"unordered"===n["list-style"]}),i('button[data-event="insertOrderedList"]',function(){return"ordered"===n["list-style"]})},this.updateRecentColor=function(t,n,o){var i=e(t).closest(".note-color"),r=i.find(".note-recent-color"),a=JSON.parse(r.attr("data-value"));a[n]=o,r.attr("data-value",JSON.stringify(a));var s="backColor"===n?"background-color":"color";r.find("i").css(s,o)}},w=function(){var e=new x;this.update=function(t,n){e.update(t,n)},this.updateRecentColor=function(t,n,o){e.updateRecentColor(t,n,o)},this.activate=function(e){e.find("button").not('button[data-event="codeview"]').removeClass("disabled")},this.deactivate=function(e){e.find("button").not('button[data-event="codeview"]').addClass("disabled")},this.updateFullscreen=function(e,t){var n=e.find('button[data-event="fullscreen"]');n.toggleClass("active",t)},this.updateCodeview=function(e,t){var n=e.find('button[data-event="codeview"]');n.toggleClass("active",t),t?this.deactivate(e):this.activate(e)},this.get=function(e,t){var n=u.makeLayoutInfo(e).toolbar();return n.find("[data-name="+t+"]")},this.setButtonState=function(e,t,n){n=n===!1?!1:!0;var o=this.get(e,t);o.toggleClass("active",n)}},T=24,N=function(){var t=e(document);this.attach=function(e,t){t.disableResizeEditor||e.statusbar().on("mousedown",n)};var n=function(e){e.preventDefault(),e.stopPropagation();var n=u.makeLayoutInfo(e.target).editable(),o=n.offset().top-t.scrollTop(),i=u.makeLayoutInfo(e.currentTarget||e.target),r=i.editor().data("options");t.on("mousemove",function(e){var t=e.clientY-(o+T);t=r.minHeight>0?Math.max(t,r.minHeight):t,t=r.maxHeight>0?Math.min(t,r.maxHeight):t,n.height(t)}).one("mouseup",function(){t.off("mousemove")})}},S=function(){var t=new x,n=function(t,n){var o=e(t),i=n?o.offset():o.position(),r=o.outerHeight(!0);return{left:i.left,top:i.top+r}},o=function(e,t){e.css({display:"block",left:t.left,top:t.top})},i=20;this.update=function(r,l,d){t.update(r,l);var u=r.find(".note-link-popover");if(l.anchor){var c=u.find("a"),f=e(l.anchor).attr("href"),h=e(l.anchor).attr("target");c.attr("href",f).html(f),h?c.attr("target","_blank"):c.removeAttr("target"),o(u,n(l.anchor,d))}else u.hide();var v=r.find(".note-image-popover");l.image?o(v,n(l.image,d)):v.hide();var p=r.find(".note-air-popover");if(d&&!l.range.isCollapsed()){var m=s.last(l.range.getClientRects());if(m){var g=a.rect2bnd(m);o(p,{left:Math.max(g.left+g.width/2-i,0),top:g.top+g.height})}}else p.hide()},this.updateRecentColor=function(e,t,n){e.updateRecentColor(e,t,n)},this.hide=function(e){e.children().hide()}},P=function(t){var n=e(document),o=function(o){if(u.isControlSizing(o.target)){o.preventDefault(),o.stopPropagation();var i=u.makeLayoutInfo(o.target),r=i.handle(),a=i.popover(),s=i.editable(),l=i.editor(),d=r.find(".note-control-selection").data("target"),c=e(d),f=c.offset(),h=n.scrollTop(),v=l.data("options").airMode;n.on("mousemove",function(e){t.invoke("editor.resizeTo",{x:e.clientX-f.left,y:e.clientY-(f.top-h)},c,!e.shiftKey),t.invoke("handle.update",r,{image:d},v),t.invoke("popover.update",a,{image:d},v)}).one("mouseup",function(){n.off("mousemove"),t.invoke("editor.afterCommand",s)}),c.data("ratio")||c.data("ratio",c.height()/c.width())}};this.attach=function(e){e.handle().on("mousedown",o)},this.update=function(t,n,o){var i=t.find(".note-control-selection");if(n.image){var r=e(n.image),a=o?r.offset():r.position(),s={w:r.outerWidth(!0),h:r.outerHeight(!0)};i.css({display:"block",left:a.left,top:a.top,width:s.w,height:s.h}).data("target",n.image);var l=s.w+"x"+s.h;i.find(".note-control-selection-info").text(l)}else i.hide()},this.hide=function(e){e.children().hide()}},L=function(t){var n=e(window),o=e("html, body");this.toggle=function(e){var i=e.editor(),r=e.toolbar(),a=e.editable(),s=e.codable(),l=function(e){a.css("height",e.h),s.css("height",e.h),s.data("cmeditor")&&s.data("cmeditor").setsize(null,e.h)};i.toggleClass("fullscreen");var d=i.hasClass("fullscreen");d?(a.data("orgheight",a.css("height")),n.on("resize",function(){l({h:n.height()-r.outerHeight()})}).trigger("resize"),o.css("overflow","hidden")):(n.off("resize"),l({h:a.data("orgheight")}),o.css("overflow","visible")),t.invoke("toolbar.updateFullscreen",r,d)}};r.hasCodeMirror&&(r.isSupportAmd?require(["CodeMirror"],function(e){t=e}):t=window.CodeMirror);var F=function(e){this.sync=function(t){var n=e.invoke("codeview.isActivated",t);n&&r.hasCodeMirror&&t.codable().data("cmEditor").save()},this.isActivated=function(e){var t=e.editor();return t.hasClass("codeview")},this.toggle=function(e){this.isActivated(e)?this.deactivate(e):this.activate(e)},this.activate=function(n){var o=n.editor(),i=n.toolbar(),a=n.editable(),s=n.codable(),l=n.popover(),d=n.handle(),c=o.data("options");if(s.val(u.html(a,c.prettifyHtml)),s.height(a.height()),e.invoke("toolbar.updateCodeview",i,!0),e.invoke("popover.hide",l),e.invoke("handle.hide",d),o.addClass("codeview"),s.focus(),r.hasCodeMirror){var f=t.fromTextArea(s[0],c.codemirror);if(c.codemirror.tern){var h=new t.TernServer(c.codemirror.tern);f.ternServer=h,f.on("cursorActivity",function(e){h.updateArgHints(e)})}f.setSize(null,a.outerHeight()),s.data("cmEditor",f)}},this.deactivate=function(t){var n=t.holder(),o=t.editor(),i=t.toolbar(),a=t.editable(),s=t.codable(),l=o.data("options");if(r.hasCodeMirror){var d=s.data("cmEditor");s.val(d.getValue()),d.toTextArea()}var c=u.value(s,l.prettifyHtml)||u.emptyPara,f=a.html()!==c;a.html(c),a.height(l.height?s.height():"auto"),o.removeClass("codeview"),f&&e.bindCustomEvent(n,a.data("callbacks"),"change")(a.html(),a),a.focus(),e.invoke("toolbar.updateCodeview",i,!1)}},E=function(t){var n=e(document);this.attach=function(e,t){t.airMode||t.disableDragAndDrop?n.on("drop",function(e){e.preventDefault()}):this.attachDragAndDropEvent(e,t)},this.attachDragAndDropEvent=function(o,i){var r=e(),a=o.editor(),s=o.dropzone(),l=s.find(".note-dropzone-message");n.on("dragenter",function(e){var n=t.invoke("codeview.isActivated",o),d=a.width()>0&&a.height()>0;n||r.length||!d||(a.addClass("dragover"),s.width(a.width()),s.height(a.height()),l.text(i.langInfo.image.dragImageHere)),r=r.add(e.target)}).on("dragleave",function(e){r=r.not(e.target),r.length||a.removeClass("dragover")}).on("drop",function(){r=e(),a.removeClass("dragover")}),s.on("dragenter",function(){s.addClass("hover"),l.text(i.langInfo.image.dropImage)}).on("dragleave",function(){s.removeClass("hover"),l.text(i.langInfo.image.dragImageHere)}),s.on("drop",function(n){n.preventDefault();var o=n.originalEvent.dataTransfer,i=o.getData("text/html"),r=o.getData("text/plain"),a=u.makeLayoutInfo(n.currentTarget||n.target);o&&o.files&&o.files.length?(a.editable().focus(),t.insertImages(a,o.files)):i?e(i).each(function(){a.editable().focus(),t.invoke("editor.insertNode",a.editable(),this)}):r&&(a.editable().focus(),t.invoke("editor.insertText",a.editable(),r))}).on("dragover",!1)}},M=function(e){this.attach=function(e){e.editable().on("paste",t)};var t=function(t){var n=t.originalEvent.clipboardData,o=u.makeLayoutInfo(t.currentTarget||t.target),i=o.editable();if(!n||!n.items||!n.items.length){var r=i.data("callbacks");if(!r.onImageUpload)return;return e.invoke("editor.saveNode",i),e.invoke("editor.saveRange",i),i.html(""),setTimeout(function(){var t=i.find("img");if(t.length&&-1!==t[0].src.indexOf("data:")){for(var n=t[0].src,r=atob(n.split(",")[1]),a=new Uint8Array(r.length),s=0;s<r.length;s++)a[s]=r.charCodeAt(s);var l=new Blob([a],{type:"image/png"});l.name="clipboard.png",e.invoke("editor.restoreNode",i),e.invoke("editor.restoreRange",i),e.insertImages(o,[l]),e.invoke("editor.afterCommand",i)}else{var d=i.html();e.invoke("editor.restoreNode",i),e.invoke("editor.restoreRange",i),e.invoke("editor.focus",i);try{e.invoke("editor.pasteHTML",i,d)}catch(u){e.invoke("editor.insertText",i,d)}}},0),void 0}var a=s.head(n.items),l="file"===a.kind&&-1!==a.type.indexOf("image/");l&&e.insertImages(o,[a.getAsFile()]),e.invoke("editor.afterCommand",i)}},I=function(t){var n=function(e,t){e.toggleClass("disabled",!t),e.attr("disabled",!t)},o=function(e,t){e.on("keypress",function(e){e.keyCode===v.code.ENTER&&t.trigger("click")})};this.showLinkDialog=function(t,i,r){return e.Deferred(function(e){var t=i.find(".note-link-dialog"),a=t.find(".note-link-text"),s=t.find(".note-link-url"),l=t.find(".note-link-btn"),d=t.find("input[type=checkbox]");t.one("shown.bs.modal",function(){a.val(r.text),a.on("input",function(){n(l,a.val()&&s.val()),r.text=a.val()}),r.url||(r.url=r.text,n(l,r.text)),s.on("input",function(){n(l,a.val()&&s.val()),r.text||a.val(s.val())}).val(r.url).trigger("focus").trigger("select"),o(s,l),o(a,l),d.prop("checked",r.newWindow),l.one("click",function(n){n.preventDefault(),e.resolve({range:r.range,url:s.val(),text:a.val(),newWindow:d.is(":checked")}),t.modal("hide")})}).one("hidden.bs.modal",function(){a.off("input keypress"),s.off("input keypress"),l.off("click"),"pending"===e.state()&&e.reject()}).modal("show")}).promise()},this.show=function(e){var n=e.editor(),o=e.dialog(),i=e.editable(),r=e.popover(),a=t.invoke("editor.getLinkInfo",i),s=n.data("options");t.invoke("editor.saveRange",i),this.showLinkDialog(i,o,a).then(function(e){t.invoke("editor.restoreRange",i),t.invoke("editor.createLink",i,e,s),t.invoke("popover.hide",r)}).fail(function(){t.invoke("editor.restoreRange",i)})}},A=function(t){var n=function(e,t){e.toggleClass("disabled",!t),e.attr("disabled",!t)},o=function(e,t){e.on("keypress",function(e){e.keyCode===v.code.ENTER&&t.trigger("click")})};this.show=function(e){var n=e.dialog(),o=e.editable();t.invoke("editor.saveRange",o),this.showImageDialog(o,n).then(function(n){t.invoke("editor.restoreRange",o),"string"==typeof n?t.invoke("editor.insertImage",o,n):t.insertImages(e,n)}).fail(function(){t.invoke("editor.restoreRange",o)})},this.showImageDialog=function(t,i){return e.Deferred(function(e){var t=i.find(".note-image-dialog"),r=i.find(".note-image-input"),a=i.find(".note-image-url"),s=i.find(".note-image-btn");t.one("shown.bs.modal",function(){r.replaceWith(r.clone().on("change",function(){e.resolve(this.files||this.value),t.modal("hide")}).val("")),s.click(function(n){n.preventDefault(),e.resolve(a.val()),t.modal("hide")}),a.on("keyup paste",function(e){var t;t="paste"===e.type?e.originalEvent.clipboardData.getData("text"):a.val(),n(s,t)}).val("").trigger("focus"),o(a,s)}).one("hidden.bs.modal",function(){r.off("change"),a.off("keyup paste keypress"),s.off("click"),"pending"===e.state()&&e.reject()}).modal("show")})}},R=function(t){this.showHelpDialog=function(t,n){return e.Deferred(function(e){var t=n.find(".note-help-dialog");t.one("hidden.bs.modal",function(){e.resolve()}).modal("show")}).promise()},this.show=function(e){var n=e.dialog(),o=e.editable();t.invoke("editor.saveRange",o,!0),this.showHelpDialog(o,n).then(function(){t.invoke("editor.restoreRange",o)})}},D=function(){var t=this.modules={editor:new y(this),toolbar:new w(this),statusbar:new N(this),popover:new S(this),handle:new P(this),fullscreen:new L(this),codeview:new F(this),dragAndDrop:new E(this),clipboard:new M(this),linkDialog:new I(this),imageDialog:new A(this),helpDialog:new R(this)};this.invoke=function(){var e=s.head(s.from(arguments)),t=s.tail(s.from(arguments)),n=e.split("."),o=n.length>1,i=o&&s.head(n),r=o?s.last(n):s.head(n),a=this.getModule(i),l=a[r];return l&&l.apply(a,t)},this.getModule=function(e){return this.modules[e]||this.modules.editor};var n=this.bindCustomEvent=function(e,t,n){return function(){var o=t[a.namespaceToCamel(n,"on")];return o&&o.apply(e[0],arguments),e.trigger("summernote."+n,arguments)}};this.insertImages=function(o,i){var r=o.editor(),a=o.editable(),s=o.holder(),l=a.data("callbacks"),d=r.data("options");l.onImageUpload?n(s,l,"image.upload")(i):e.each(i,function(e,o){var i=o.name;d.maximumImageFileSize&&d.maximumImageFileSize<o.size?n(s,l,"image.upload.error")(d.langInfo.image.maximumFileSizeError):h.readFileAsDataURL(o).then(function(e){t.editor.insertImage(a,e,i)}).fail(function(){n(s,l,"image.upload.error")(d.langInfo.image.maximumFileSizeError)})})};var o={showLinkDialog:function(e){t.linkDialog.show(e)},showImageDialog:function(e){t.imageDialog.show(e)},showHelpDialog:function(e){t.helpDialog.show(e)},fullscreen:function(e){t.fullscreen.toggle(e)},codeview:function(e){t.codeview.toggle(e)}},i=function(e){u.isImg(e.target)&&e.preventDefault()},l=function(e){var n=u.makeLayoutInfo(e.currentTarget||e.target);t.editor.removeBogus(n.editable()),d(e)},d=function(e){setTimeout(function(){var n=u.makeLayoutInfo(e.currentTarget||e.target),o=t.editor.currentStyle(e.target);if(o){var i=n.editor().data("options").airMode;i||t.toolbar.update(n.toolbar(),o),t.popover.update(n.popover(),o,i),t.handle.update(n.handle(),o,i)}},0)},c=function(e){var n=u.makeLayoutInfo(e.currentTarget||e.target);t.popover.hide(n.popover()),t.handle.hide(n.handle())},f=function(t){var n=e(t.target).closest("[data-event]");n.length&&t.preventDefault()},m=function(n){var i=e(n.target).closest("[data-event]");if(i.length){var r,a=i.attr("data-event"),l=i.attr("data-value"),c=i.attr("data-hide"),f=u.makeLayoutInfo(n.target);if(-1!==e.inArray(a,["resize","floatMe","removeMedia","imageShape"])){var h=f.handle().find(".note-control-selection");r=e(h.data("target"))}if(c&&i.parents(".popover").hide(),e.isFunction(e.summernote.pluginEvents[a]))e.summernote.pluginEvents[a](n,t.editor,f,l);else if(t.editor[a]){var v=f.editable();v.focus(),t.editor[a](v,l,r),n.preventDefault()}else o[a]&&(o[a].call(this,f),n.preventDefault());if(-1!==e.inArray(a,["backColor","foreColor"])){var p=f.editor().data("options",p),m=p.airMode?t.popover:t.toolbar;m.updateRecentColor(s.head(i),a,l)}d(n)}},g=18,b=function(t,n){var o,i=e(t.target.parentNode),r=i.next(),a=i.find(".note-dimension-picker-mousecatcher"),s=i.find(".note-dimension-picker-highlighted"),l=i.find(".note-dimension-picker-unhighlighted");if(void 0===t.offsetX){var d=e(t.target).offset();o={x:t.pageX-d.left,y:t.pageY-d.top}}else o={x:t.offsetX,y:t.offsetY};var u={c:Math.ceil(o.x/g)||1,r:Math.ceil(o.y/g)||1};s.css({width:u.c+"em",height:u.r+"em"}),a.attr("data-value",u.c+"x"+u.r),3<u.c&&u.c<n.insertTableMaxSize.col&&l.css({width:u.c+1+"em"}),3<u.r&&u.r<n.insertTableMaxSize.row&&l.css({height:u.r+1+"em"}),r.html(u.c+" x "+u.r)};this.bindKeyMap=function(n,i){var r=n.editor(),a=n.editable();a.on("keydown",function(s){var l=[];s.metaKey&&l.push("CMD"),s.ctrlKey&&!s.altKey&&l.push("CTRL"),s.shiftKey&&l.push("SHIFT");var d=v.nameFromCode[s.keyCode];d&&l.push(d);var u,c=l.join("+"),f=i[c];if(f){if(u=e.summernote.pluginEvents[c],e.isFunction(u)&&u(s,t.editor,n))return!1;u=e.summernote.pluginEvents[f],e.isFunction(u)?u(s,t.editor,n):t.editor[f]?(t.editor[f](a,r.data("options")),s.preventDefault()):o[f]&&(o[f].call(this,n),s.preventDefault())}else v.isEdit(s.keyCode)&&t.editor.afterCommand(a)})},this.attach=function(e,n){n.shortcuts&&this.bindKeyMap(e,n.keyMap[r.isMac?"mac":"pc"]),e.editable().on("mousedown",i),e.editable().on("keyup mouseup",l),e.editable().on("scroll blur",c),t.clipboard.attach(e,n),t.handle.attach(e,n),e.popover().on("click",m),e.popover().on("mousedown",f),t.dragAndDrop.attach(e,n),n.airMode||(e.toolbar().on("click",m),e.toolbar().on("mousedown",f),t.statusbar.attach(e,n));var o=n.airMode?e.popover():e.toolbar(),a=o.find(".note-dimension-picker-mousecatcher");a.css({width:n.insertTableMaxSize.col+"em",height:n.insertTableMaxSize.row+"em"}).on("mousemove",function(e){b(e,n)}),e.editor().data("options",n),r.isMSIE||setTimeout(function(){document.execCommand("styleWithCSS",0,n.styleWithSpan)},0);var d=new p(e.editable());e.editable().data("NoteHistory",d),e.editable().data("callbacks",{onInit:n.onInit,onFocus:n.onFocus,onBlur:n.onBlur,onKeydown:n.onKeydown,onKeyup:n.onKeyup,onMousedown:n.onMousedown,onEnter:n.onEnter,onPaste:n.onPaste,onBeforeCommand:n.onBeforeCommand,onChange:n.onChange,onImageUpload:n.onImageUpload,onImageUploadError:n.onImageUploadError,onMediaDelete:n.onMediaDelete}),u.isTextarea(s.head(e.holder()))&&e.holder().closest("form").submit(function(){e.holder().val(e.holder().code())})},this.attachCustomEvent=function(t,o){var i=t.holder(),a=t.editable(),l=a.data("callbacks");a.focus(n(i,l,"focus")),a.blur(n(i,l,"blur")),a.keydown(function(e){e.keyCode===v.code.ENTER&&n(i,l,"enter").call(this,e),n(i,l,"keydown").call(this,e)}),a.keyup(n(i,l,"keyup")),a.on("mousedown",n(i,l,"mousedown")),a.on("mouseup",n(i,l,"mouseup")),a.on("scroll",n(i,l,"scroll")),a.on("paste",n(i,l,"paste"));var d=r.isMSIE?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input";a.on(d,function(){n(i,l,"change")(a.html(),a)}),o.airMode||(t.toolbar().click(n(i,l,"toolbar.click")),t.popover().click(n(i,l,"popover.click"))),u.isTextarea(s.head(i))&&i.closest("form").submit(function(e){n(i,l,"submit").call(this,e,i.code())}),n(i,l,"init")(t);for(var c=0,f=e.summernote.plugins.length;f>c;c++)e.isFunction(e.summernote.plugins[c].init)&&e.summernote.plugins[c].init(t)},this.detach=function(e,t){e.holder().off(),e.editable().off(),e.popover().off(),e.handle().off(),e.dialog().off(),t.airMode||(e.dropzone().off(),e.toolbar().off(),e.statusbar().off())}},H=function(){var t=function(e,t){var n=t.event,o=t.value,i=t.title,r=t.className,a=t.dropdown,s=t.hide;return'<button type="button" class="btn btn-default btn-sm btn-small'+(r?" "+r:"")+(a?" dropdown-toggle":"")+'"'+(a?' data-toggle="dropdown"':"")+(i?' title="'+i+'"':"")+(n?' data-event="'+n+'"':"")+(o?" data-value='"+o+"'":"")+(s?" data-hide='"+s+"'":"")+' tabindex="-1">'+e+(a?' <span class="caret"></span>':"")+"</button>"+(a||"")},n=function(e,n){var o='<i class="'+e+'"></i>';return t(o,n)},o=function(t,n){var o=e('<div class="'+t+' popover bottom in" style="display: none;"><div class="arrow"></div><div class="popover-content"></div></div>');return o.find(".popover-content").append(n),o},i=function(e,t,n,o){return'<div class="'+e+' modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content">'+(t?'<div class="modal-header"><button type="button" class="close" aria-hidden="true" tabindex="-1">&times;</button><h4 class="modal-title">'+t+"</h4></div>":"")+'<div class="modal-body">'+n+"</div>"+(o?'<div class="modal-footer">'+o+"</div>":"")+"</div></div></div>"},s={picture:function(e,t){return n(t.iconPrefix+"picture-o",{event:"showImageDialog",title:e.image.image,hide:!0})},link:function(e,t){return n(t.iconPrefix+"link",{event:"showLinkDialog",title:e.link.link,hide:!0})},table:function(e,t){var o='<ul class="note-table dropdown-menu"><div class="note-dimension-picker"><div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div><div class="note-dimension-picker-highlighted"></div><div class="note-dimension-picker-unhighlighted"></div></div><div class="note-dimension-display"> 1 x 1 </div></ul>';return n(t.iconPrefix+"table",{title:e.table.table,dropdown:o})},style:function(e,t){var o=t.styleTags.reduce(function(t,n){var o=e.style["p"===n?"normal":n];return t+'<li><a data-event="formatBlock" href="#" data-value="'+n+'">'+("p"===n||"pre"===n?o:"<"+n+">"+o+"</"+n+">")+"</a></li>"},"");return n(t.iconPrefix+"magic",{title:e.style.style,dropdown:'<ul class="dropdown-menu">'+o+"</ul>"})},fontname:function(e,n){var o=[],i=n.fontNames.reduce(function(e,t){return r.isFontInstalled(t)||-1!==n.fontNamesIgnoreCheck.indexOf(t)?(o.push(t),e+'<li><a data-event="fontName" href="#" data-value="'+t+'" style="font-family:\''+t+'\'"><i class="'+n.iconPrefix+'check"></i> '+t+"</a></li>"):e},""),a=r.isFontInstalled(n.defaultFontName),s=a?n.defaultFontName:o[0],l='<span class="note-current-fontname">'+s+"</span>";return t(l,{title:e.font.name,dropdown:'<ul class="dropdown-menu note-check">'+i+"</ul>"})},fontsize:function(e,n){var o=n.fontSizes.reduce(function(e,t){return e+'<li><a data-event="fontSize" href="#" data-value="'+t+'"><i class="fa fa-check"></i> '+t+"</a></li>"},""),i='<span class="note-current-fontsize">11</span>';return t(i,{title:e.font.size,dropdown:'<ul class="dropdown-menu note-check">'+o+"</ul>"})},color:function(e,n){var o='<i class="'+n.iconPrefix+'font" style="color:black;background-color:yellow;"></i>',i=t(o,{className:"note-recent-color",title:e.color.recent,event:"color",value:'{"backColor":"yellow"}'}),r='<ul class="dropdown-menu"><li><div class="btn-group"><div class="note-palette-title">'+e.color.background+'</div><div class="note-color-reset" data-event="backColor" data-value="inherit" title="'+e.color.transparent+'">'+e.color.setTransparent+'</div><div class="note-color-palette" data-target-event="backColor"></div></div><div class="btn-group"><div class="note-palette-title">'+e.color.foreground+'</div><div class="note-color-reset" data-event="foreColor" data-value="inherit" title="'+e.color.reset+'">'+e.color.resetToDefault+'</div><div class="note-color-palette" data-target-event="foreColor"></div></div></li></ul>',a=t("",{title:e.color.more,dropdown:r});return i+a},bold:function(e,t){return n(t.iconPrefix+"bold",{event:"bold",title:e.font.bold})},italic:function(e,t){return n(t.iconPrefix+"italic",{event:"italic",title:e.font.italic})},underline:function(e,t){return n(t.iconPrefix+"underline",{event:"underline",title:e.font.underline})},strikethrough:function(e){return n("fa fa-strikethrough",{event:"strikethrough",title:e.font.strikethrough})},superscript:function(e){return n("fa fa-superscript",{event:"superscript",title:e.font.superscript})},subscript:function(e){return n("fa fa-subscript",{event:"subscript",title:e.font.subscript})},clear:function(e,t){return n(t.iconPrefix+"eraser",{event:"removeFormat",title:e.font.clear})},ul:function(e,t){return n(t.iconPrefix+"list-ul",{event:"insertUnorderedList",title:e.lists.unordered})},ol:function(e,t){return n(t.iconPrefix+"list-ol",{event:"insertOrderedList",title:e.lists.ordered})},paragraph:function(e,t){var o=n(t.iconPrefix+"align-left",{title:e.paragraph.left,event:"justifyLeft"}),i=n(t.iconPrefix+"align-center",{title:e.paragraph.center,event:"justifyCenter"}),r=n(t.iconPrefix+"align-right",{title:e.paragraph.right,event:"justifyRight"}),a=n(t.iconPrefix+"align-justify",{title:e.paragraph.justify,event:"justifyFull"}),s=n(t.iconPrefix+"outdent",{title:e.paragraph.outdent,event:"outdent"}),l=n(t.iconPrefix+"indent",{title:e.paragraph.indent,event:"indent"}),d='<div class="dropdown-menu"><div class="note-align btn-group">'+o+i+r+a+'</div><div class="note-list btn-group">'+l+s+"</div></div>";return n(t.iconPrefix+"align-left",{title:e.paragraph.paragraph,dropdown:d})},height:function(e,t){var o=t.lineHeights.reduce(function(e,n){return e+'<li><a data-event="lineHeight" href="#" data-value="'+parseFloat(n)+'"><i class="'+t.iconPrefix+'check"></i> '+n+"</a></li>"},"");return n(t.iconPrefix+"text-height",{title:e.font.height,dropdown:'<ul class="dropdown-menu note-check">'+o+"</ul>"})},help:function(e,t){return n(t.iconPrefix+"question",{event:"showHelpDialog",title:e.options.help,hide:!0})},fullscreen:function(e,t){return n(t.iconPrefix+"arrows-alt",{event:"fullscreen",title:e.options.fullscreen})},codeview:function(e,t){return n(t.iconPrefix+"code",{event:"codeview",title:e.options.codeview})},undo:function(e,t){return n(t.iconPrefix+"undo",{event:"undo",title:e.history.undo})},redo:function(e,t){return n(t.iconPrefix+"repeat",{event:"redo",title:e.history.redo})},hr:function(e,t){return n(t.iconPrefix+"minus",{event:"insertHorizontalRule",title:e.hr.insert})}},l=function(i,r){var a=function(){var e=n(r.iconPrefix+"edit",{title:i.link.edit,event:"showLinkDialog",hide:!0}),t=n(r.iconPrefix+"unlink",{title:i.link.unlink,event:"unlink"}),a='<a href="http://www.google.com" target="_blank">www.google.com</a>&nbsp;&nbsp;<div class="note-insert btn-group">'+e+t+"</div>";return o("note-link-popover",a)},l=function(){var e=t('<span class="note-fontsize-10">100%</span>',{title:i.image.resizeFull,event:"resize",value:"1"}),a=t('<span class="note-fontsize-10">50%</span>',{title:i.image.resizeHalf,event:"resize",value:"0.5"}),s=t('<span class="note-fontsize-10">25%</span>',{title:i.image.resizeQuarter,event:"resize",value:"0.25"}),l=n(r.iconPrefix+"align-left",{title:i.image.floatLeft,event:"floatMe",value:"left"}),d=n(r.iconPrefix+"align-right",{title:i.image.floatRight,event:"floatMe",value:"right"}),u=n(r.iconPrefix+"align-justify",{title:i.image.floatNone,event:"floatMe",value:"none"}),c=n(r.iconPrefix+"square",{title:i.image.shapeRounded,event:"imageShape",value:"img-rounded"}),f=n(r.iconPrefix+"circle-o",{title:i.image.shapeCircle,event:"imageShape",value:"img-circle"}),h=n(r.iconPrefix+"picture-o",{title:i.image.shapeThumbnail,event:"imageShape",value:"img-thumbnail"}),v=n(r.iconPrefix+"times",{title:i.image.shapeNone,event:"imageShape",value:""}),p=n(r.iconPrefix+"trash-o",{title:i.image.remove,event:"removeMedia",value:"none"}),m='<div class="btn-group">'+e+a+s+'</div><div class="btn-group">'+l+d+u+'</div><div class="btn-group">'+c+f+h+v+'</div><div class="btn-group">'+p+"</div>";return o("note-image-popover",m)},d=function(){for(var t=e("<div />"),n=0,a=r.airPopover.length;a>n;n++){for(var l=r.airPopover[n],d=e('<div class="note-'+l[0]+' btn-group">'),u=0,c=l[1].length;c>u;u++){var f=e(s[l[1][u]](i,r));f.attr("data-name",l[1][u]),d.append(f)}t.append(d)}return o("note-air-popover",t.children())},u=e('<div class="note-popover" />');return u.append(a()),u.append(l()),r.airMode&&u.append(d()),u},d=function(){return'<div class="note-handle"><div class="note-control-selection"><div class="note-control-selection-bg"></div><div class="note-control-holder note-control-nw"></div><div class="note-control-holder note-control-ne"></div><div class="note-control-holder note-control-sw"></div><div class="note-control-sizing note-control-se"></div><div class="note-control-selection-info"></div></div></div>'
},c=function(e,t){var n="note-shortcut-col col-xs-6 note-shortcut-",o=[];for(var i in t)t.hasOwnProperty(i)&&o.push('<div class="'+n+'key">'+t[i].kbd+'</div><div class="'+n+'name">'+t[i].text+"</div>");return'<div class="note-shortcut-row row"><div class="'+n+'title col-xs-offset-6">'+e+'</div></div><div class="note-shortcut-row row">'+o.join('</div><div class="note-shortcut-row row">')+"</div>"},f=function(e){var t=[{kbd:"â + B",text:e.font.bold},{kbd:"â + I",text:e.font.italic},{kbd:"â + U",text:e.font.underline},{kbd:"â + \\",text:e.font.clear}];return c(e.shortcut.textFormatting,t)},h=function(e){var t=[{kbd:"â + Z",text:e.history.undo},{kbd:"â + â§ + Z",text:e.history.redo},{kbd:"â + ]",text:e.paragraph.indent},{kbd:"â + [",text:e.paragraph.outdent},{kbd:"â + ENTER",text:e.hr.insert}];return c(e.shortcut.action,t)},v=function(e){var t=[{kbd:"â + â§ + L",text:e.paragraph.left},{kbd:"â + â§ + E",text:e.paragraph.center},{kbd:"â + â§ + R",text:e.paragraph.right},{kbd:"â + â§ + J",text:e.paragraph.justify},{kbd:"â + â§ + NUM7",text:e.lists.ordered},{kbd:"â + â§ + NUM8",text:e.lists.unordered}];return c(e.shortcut.paragraphFormatting,t)},p=function(e){var t=[{kbd:"â + NUM0",text:e.style.normal},{kbd:"â + NUM1",text:e.style.h1},{kbd:"â + NUM2",text:e.style.h2},{kbd:"â + NUM3",text:e.style.h3},{kbd:"â + NUM4",text:e.style.h4},{kbd:"â + NUM5",text:e.style.h5},{kbd:"â + NUM6",text:e.style.h6}];return c(e.shortcut.documentStyle,t)},m=function(e,t){var n=t.extraKeys,o=[];for(var i in n)n.hasOwnProperty(i)&&o.push({kbd:i,text:n[i]});return c(e.shortcut.extraKeys,o)},g=function(e,t){var n='class="note-shortcut note-shortcut-col col-sm-6 col-xs-12"',o=["<div "+n+">"+h(e,t)+"</div><div "+n+">"+f(e,t)+"</div>","<div "+n+">"+p(e,t)+"</div><div "+n+">"+v(e,t)+"</div>"];return t.extraKeys&&o.push("<div "+n+">"+m(e,t)+"</div>"),'<div class="note-shortcut-row row">'+o.join('</div><div class="note-shortcut-row row">')+"</div>"},b=function(e){return e.replace(/â/g,"Ctrl").replace(/â§/g,"Shift")},C={image:function(e,t){var n="";if(t.maximumImageFileSize){var o=Math.floor(Math.log(t.maximumImageFileSize)/Math.log(1024)),r=1*(t.maximumImageFileSize/Math.pow(1024,o)).toFixed(2)+" "+" KMGTP"[o]+"B";n="<small>"+e.image.maximumFileSize+" : "+r+"</small>"}var a='<div class="form-group row-fluid note-group-select-from-files"><label>'+e.image.selectFromFiles+'</label><input class="note-image-input" type="file" name="files" accept="image/*" multiple="multiple" />'+n+'</div><div class="form-group row-fluid"><label>'+e.image.url+'</label><input class="note-image-url form-control span12" type="text" /></div>',s='<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+e.image.insert+"</button>";return i("note-image-dialog",e.image.insert,a,s)},link:function(e,t){var n='<div class="form-group row-fluid"><label>'+e.link.textToDisplay+'</label><input class="note-link-text form-control span12" type="text" /></div><div class="form-group row-fluid"><label>'+e.link.url+'</label><input class="note-link-url form-control span12" type="text" /></div>'+(t.disableLinkTarget?"":'<div class="checkbox"><label><input type="checkbox" checked> '+e.link.openInNewWindow+"</label></div>"),o='<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+e.link.insert+"</button>";return i("note-link-dialog",e.link.insert,n,o)},help:function(e,t){var n='<a class="modal-close pull-right" aria-hidden="true" tabindex="-1">'+e.shortcut.close+'</a><div class="title">'+e.shortcut.shortcuts+"</div>"+(r.isMac?g(e,t):b(g(e,t)))+'<p class="text-center"><a href="//summernote.org/" target="_blank">Summernote 0.6.7</a> Â· <a href="//github.com/summernote/summernote" target="_blank">Project</a> Â· <a href="//github.com/summernote/summernote/issues" target="_blank">Issues</a></p>';return i("note-help-dialog","",n,"")}},k=function(t,n){var o="";return e.each(C,function(e,i){o+=i(t,n)}),'<div class="note-dialog">'+o+"</div>"},y=function(){return'<div class="note-resizebar"><div class="note-icon-bar"></div><div class="note-icon-bar"></div><div class="note-icon-bar"></div></div>'},x=function(e){return r.isMac&&(e=e.replace("CMD","â").replace("SHIFT","â§")),e.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]")},w=function(t,n,o){var i=a.invertObject(n),r=t.find("button");r.each(function(t,n){var o=e(n),r=i[o.data("event")];r&&o.attr("title",function(e,t){return t+" ("+x(r)+")"})}).tooltip({container:"body",trigger:"hover",placement:o||"top"}).on("click",function(){e(this).tooltip("hide")})},T=function(t,n){var o=n.colors;t.find(".note-color-palette").each(function(){for(var t=e(this),n=t.attr("data-target-event"),i=[],r=0,a=o.length;a>r;r++){for(var s=o[r],l=[],d=0,u=s.length;u>d;d++){var c=s[d];l.push(['<button type="button" class="note-color-btn" style="background-color:',c,';" data-event="',n,'" data-value="',c,'" title="',c,'" data-toggle="button" tabindex="-1"></button>'].join(""))}i.push('<div class="note-color-row">'+l.join("")+"</div>")}t.html(i.join(""))})};this.createLayoutByAirMode=function(t,n){var o=n.langInfo,i=n.keyMap[r.isMac?"mac":"pc"],s=a.uniqueId();t.addClass("note-air-editor note-editable"),t.attr({id:"note-editor-"+s,contentEditable:!0});var u=document.body,c=e(l(o,n));c.addClass("note-air-layout"),c.attr("id","note-popover-"+s),c.appendTo(u),w(c,i),T(c,n);var f=e(d());f.addClass("note-air-layout"),f.attr("id","note-handle-"+s),f.appendTo(u);var h=e(k(o,n));h.addClass("note-air-layout"),h.attr("id","note-dialog-"+s),h.find("button.close, a.modal-close").click(function(){e(this).closest(".modal").modal("hide")}),h.appendTo(u)},this.createLayoutByFrame=function(t,n){var o=n.langInfo,i=e('<div class="note-editor"></div>');n.width&&i.width(n.width),n.height>0&&e('<div class="note-statusbar">'+(n.disableResizeEditor?"":y())+"</div>").prependTo(i);var a=!t.is(":disabled"),c=e('<div class="note-editable" contentEditable="'+a+'"></div>').prependTo(i);n.height&&c.height(n.height),n.direction&&c.attr("dir",n.direction);var f=t.attr("placeholder")||n.placeholder;f&&c.attr("data-placeholder",f),c.html(u.html(t)),e('<textarea class="note-codable"></textarea>').prependTo(i);for(var h=e('<div class="note-toolbar btn-toolbar" />'),v=0,p=n.toolbar.length;p>v;v++){for(var m=n.toolbar[v][0],g=n.toolbar[v][1],b=e('<div class="note-'+m+' btn-group" />'),C=0,x=g.length;x>C;C++){var N=s[g[C]];if(e.isFunction(N)){var S=e(N(o,n));S.attr("data-name",g[C]),b.append(S)}}h.append(b)}h.prependTo(i);var P=n.keyMap[r.isMac?"mac":"pc"];T(h,n),w(h,P,"bottom");var L=e(l(o,n)).prependTo(i);T(L,n),w(L,P),e(d()).prependTo(i);var F=e(k(o,n)).prependTo(i);F.find("button.close, a.modal-close").click(function(){e(this).closest(".modal").modal("hide")}),e('<div class="note-dropzone"><div class="note-dropzone-message"></div></div>').prependTo(i),i.insertAfter(t),t.hide()},this.hasNoteEditor=function(e){return this.noteEditorFromHolder(e).length>0},this.noteEditorFromHolder=function(t){return t.hasClass("note-air-editor")?t:t.next().hasClass("note-editor")?t.next():e()},this.createLayout=function(e,t){t.airMode?this.createLayoutByAirMode(e,t):this.createLayoutByFrame(e,t)},this.layoutInfoFromHolder=function(e){var t=this.noteEditorFromHolder(e);if(t.length)return t.data("holder",e),u.buildLayoutInfo(t)},this.removeLayout=function(e,t,n){n.airMode?(e.removeClass("note-air-editor note-editable").removeAttr("id contentEditable"),t.popover().remove(),t.handle().remove(),t.dialog().remove()):(e.html(t.editable().html()),t.editor().remove(),e.show())},this.getTemplate=function(){return{button:t,iconButton:n,dialog:i}},this.addButtonInfo=function(e,t){s[e]=t},this.addDialogInfo=function(e,t){C[e]=t}};e.summernote=e.summernote||{},e.extend(e.summernote,f);var B=new H,z=new D;e.extend(e.summernote,{renderer:B,eventHandler:z,core:{agent:r,list:s,dom:u,range:c},pluginEvents:{},plugins:[]}),e.summernote.addPlugin=function(t){e.summernote.plugins.push(t),t.buttons&&e.each(t.buttons,function(e,t){B.addButtonInfo(e,t)}),t.dialogs&&e.each(t.dialogs,function(e,t){B.addDialogInfo(e,t)}),t.events&&e.each(t.events,function(t,n){e.summernote.pluginEvents[t]=n}),t.langs&&e.each(t.langs,function(t,n){e.summernote.lang[t]&&e.extend(e.summernote.lang[t],n)}),t.options&&e.extend(e.summernote.options,t.options)},e.fn.extend({summernote:function(){var t=e.type(s.head(arguments)),n="string"===t,o="object"===t,i=o?s.head(arguments):{};if(i=e.extend({},e.summernote.options,i),i.langInfo=e.extend(!0,{},e.summernote.lang["en-US"],e.summernote.lang[i.lang]),!n&&o)for(var r=0,a=e.summernote.plugins.length;a>r;r++){var l=e.summernote.plugins[r];i.plugin[l.name]&&(e.summernote.plugins[r]=e.extend(!0,l,i.plugin[l.name]))}this.each(function(t,n){var o=e(n);if(!B.hasNoteEditor(o)){B.createLayout(o,i);var r=B.layoutInfoFromHolder(o);o.data("layoutInfo",r),z.attach(r,i),z.attachCustomEvent(r,i)}});var d=this.first();if(d.length){var u=B.layoutInfoFromHolder(d);if(n){var c=s.head(s.from(arguments)),f=s.tail(s.from(arguments)),h=[c,u.editable()].concat(f);return z.invoke.apply(z,h)}i.focus&&u.editable().focus()}return this},code:function(t){if(void 0===t){var n=this.first();if(!n.length)return;var o=B.layoutInfoFromHolder(n),i=o&&o.editable();if(i&&i.length){var r=z.invoke("codeview.isActivated",o);return z.invoke("codeview.sync",o),r?o.codable().val():o.editable().html()}return u.value(n)}return this.each(function(n,o){var i=B.layoutInfoFromHolder(e(o)),r=i&&i.editable();r&&r.html(t)}),this},destroy:function(){return this.each(function(t,n){var o=e(n);if(B.hasNoteEditor(o)){var i=B.layoutInfoFromHolder(o),r=i.editor().data("options");z.detach(i,r),B.removeLayout(o,i,r)}}),this}})});